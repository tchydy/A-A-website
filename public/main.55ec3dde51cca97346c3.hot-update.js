/*! For license information please see main.55ec3dde51cca97346c3.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/slider.js":(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});var s=i("./node_modules/prefix/index.js"),h=i.n(s),n=i("./node_modules/gsap/index.js"),r=i("./node_modules/gsap/ScrollTrigger.js"),l=i("./app/classes/detection.js");const o=(t,e,i)=>(1-i)*t+i*e;class d{constructor(t){this.el=document.querySelector(t.el),this.wrap=this.el.querySelector(t.wrap),this.items=this.el.querySelectorAll(t.item),this.bar=document.querySelector(t.bar),this.leftBtn=document.querySelector(".btn__left"),this.rightBtn=document.querySelector(".btn__right"),this.section=document.querySelector(".home__services"),this.slider=document.querySelector(".home__services__gallery"),this.DragText=document.querySelector(".cursor__text1"),this.init(),console.log("slider created"),this.inView=!1,this.centerSlide=null,this.transformPrefix=h()("transform"),n.default.registerPlugin(r.ScrollTrigger),this.scroll()}init(){this.progress=0,this.speed=0,this.oldX=0,this.x=0,this.playrate=0,this.bindings(),this.calculate(),this.activeSlide(),this.events(),this.raf()}bindings(){["events","calculate","raf","handleWheel","handleLeftClicks","handleRightClicks","move","raf","handleTouchStart","handleTouchMove","handleTouchEnd","activeSlide"].forEach((t=>{this[t]=this[t].bind(this)}))}calculate(){this.windowWidth=window.innerWidth,this.wrapWidth=this.slider.getBoundingClientRect().width,this.ItemWidth=this.wrapWidth/this.items.length,(l.default.isDesktop()||l.default.isTablet())&&(this.minScroll=this.wrap.getBoundingClientRect().left-this.ItemWidth,this.windowCenter=this.windowWidth/2+.25*this.ItemWidth,this.windowLeft=this.windowWidth/2-.75*this.ItemWidth),l.default.isPhone()&&(this.minScroll=this.wrap.getBoundingClientRect().left,this.windowCenter=this.windowWidth/2+.25*this.ItemWidth,this.windowLeft=this.minScroll-20,console.log(this.windowLeft,this.windowCenter)),this.maxScroll=this.wrapWidth-this.el.clientWidth-this.minScroll,this.sectionTop=this.section.getBoundingClientRect().top}activeSlide(){this.items.forEach(((t,e)=>{this.itemBoundsLeft=t.getBoundingClientRect().left,this.isCenter=this.itemBoundsLeft<this.windowCenter&&this.itemBoundsLeft>this.windowLeft,this.isCenter?(this.centerSlide=t,this.centerSlide.classList.add("active")):t.classList.remove("active")}))}activeSlideClick(){this.items.forEach(((t,e)=>{this.rightClick?this.itemBoundsLeft=t.getBoundingClientRect().left-this.ItemWidth:this.itemBoundsLeft=t.getBoundingClientRect().left+this.ItemWidth,this.isCenter=this.itemBoundsLeft<this.windowCenter&&this.itemBoundsLeft>this.windowLeft,this.isCenter?(this.centerSlide=t,this.centerSlide.classList.add("active")):t.classList.remove("active")}))}handleWheel(t){this.inView&&(this.inView?this.progress+=t.deltaY:this.progress=0,this.move())}handleLeftClicks(t){this.rightClick=!1,this.progress-=this.ItemWidth,this.activeSlideClick(),this.progress<=this.minScroll-100&&(console.log("gallery start",this.items[0].getBoundingClientRect().left),this.slideEnd=this.items[this.items.length-1],this.progress-=this.ItemWidth,this.items.forEach(((t,e)=>{t.classList.remove("active")})),this.progress=0,setTimeout((()=>{this.progress=this.maxScroll,this.slideEnd.classList.add("active")}),1e3))}handleRightClicks(t){this.clicked=!0,this.rightClick=!0,this.progress+=this.ItemWidth,this.activeSlideClick(),this.progress>=this.maxScroll&&(this.slideStart=this.items[0],this.items.forEach(((t,e)=>{t.classList.remove("active")})),this.progress=this.maxScroll,setTimeout((()=>{this.progress=this.minScroll,this.slideStart.classList.add("active")}),1e3))}handleTouchStart(t){t.preventDefault(),this.inView&&(this.dragging=!0,this.startX=t.clientX||t.touches[0].clientX,this.el.classList.add("dragging"),this.DragText.classList.add("none"),this.click=!1)}handleTouchMove(t){if(this.click=!1,!this.inView)return;if(!this.dragging)return!1;const e=t.clientX||t.touches[0].clientX;this.progress+=2.5*(this.startX-e),this.startX=e,this.move()}handleTouchEnd(){this.click=!1,this.inView&&(this.dragging=!1,this.el.classList.remove("dragging"),this.DragText.classList.remove("none"))}move(){var t,e,i;this.click=!1,this.progress=(t=this.progress,e=this.minScroll,i=this.maxScroll,Math.max(e,Math.min(t,i))),this.activeSlide()}events(){window.addEventListener("resize",this.calculate),window.addEventListener("wheel",this.handleWheel),this.rightBtn.addEventListener("click",this.handleRightClicks),this.leftBtn.addEventListener("click",this.handleLeftClicks),this.el.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("touchend",this.handleTouchEnd),window.addEventListener("mousedown",this.handleTouchStart),window.addEventListener("mousemove",this.handleTouchMove),window.addEventListener("mouseup",this.handleTouchEnd),document.body.addEventListener("mouseleave",this.handleTouchEnd)}scroll(){const t=this;this.slideY=this.wrapWidth+this.ItemWidth-window.innerWidth,this.tl=n.default.timeline({scrollTrigger:{trigger:".home__about",start:"bottom 10%",toggleActions:"restart complete none reset",onEnterBack:function(){t.DragText.classList.add("none")}}}),this.tl.set(".home__about__scrolltext .word",{y:"100%",opacity:0,duration:.5}).set(".home__services",{opacity:1,duration:.5,ease:"expo.out",onComplete:function(){t.inView=!0,t.DragText.classList.remove("none")}}),this.tl1=n.default.timeline({scrollTrigger:{trigger:".home__services",start:"top top",end:`+=${this.slideY}`,toggleActions:"restart complete none reset",markers:!0,pin:!0,scrub:1,onLeave:function(){t.DragText.classList.add("none")},onEnterBack:function(){t.DragText.classList.remove("none")}}}),this.tl.to(".home__services__gallery ",{y:this.wrapWidth})}moveSlider(){this.sectionTop=this.section.getBoundingClientRect().top,this.raf()}raf(){this.inView&&(this.x=o(this.x,this.progress,.1),this.playrate=this.x/this.maxScroll,this.wrap.style[this.transformPrefix]=`translateX(${-this.x}px)`,this.bar.style[this.transformPrefix]=`scaleX(${.18+.82*this.playrate})`,this.speed=Math.min(100,this.oldX-this.x),this.oldX=this.x,this.scale=o(this.scale,this.speed,.1),this.items.forEach((t=>{t.style[this.transformPrefix]=`scale(${1-.002*Math.abs(this.speed)})`,t.querySelector("img").style[this.transformPrefix]=`scaleX(${1+.004*Math.abs(this.speed)})`})))}}}},(function(t){t.h=()=>"906af258c17095fe83d6"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi41NWVjM2RkZTUxY2NhOTczNDZjMy5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7MlJBS0EsTUFBTUEsRUFBTyxDQUFDQyxFQUFJQyxFQUFJQyxLQUFPLEVBQUlBLEdBQUtGLEVBQUtFLEVBQUlELEVBR2hDLE1BQU1FLEVBQ25CQyxZQUFZQyxHQUNWQyxLQUFLQyxHQUFLQyxTQUFTQyxjQUFjSixFQUFJRSxJQUNyQ0QsS0FBS0ksS0FBT0osS0FBS0MsR0FBR0UsY0FBY0osRUFBSUssTUFDdENKLEtBQUtLLE1BQVFMLEtBQUtDLEdBQUdLLGlCQUFpQlAsRUFBSVEsTUFDMUNQLEtBQUtRLElBQU1OLFNBQVNDLGNBQWNKLEVBQUlTLEtBQ3RDUixLQUFLUyxRQUFVUCxTQUFTQyxjQUFjLGNBQ3RDSCxLQUFLVSxTQUFXUixTQUFTQyxjQUFjLGVBRXZDSCxLQUFLVyxRQUFVVCxTQUFTQyxjQUFjLG1CQUN0Q0gsS0FBS1ksT0FBU1YsU0FBU0MsY0FBYyw0QkFDckNILEtBQUthLFNBQVdYLFNBQVNDLGNBQWMsa0JBQ3ZDSCxLQUFLYyxPQUNMQyxRQUFRQyxJQUFJLGtCQUVaaEIsS0FBS2lCLFFBQVMsRUFFZGpCLEtBQUtrQixZQUFjLEtBRW5CbEIsS0FBS21CLGdCQUFrQkMsR0FBQUEsQ0FBTyxhQUM5QkMsRUFBQUEsUUFBQUEsZUFBb0JDLEVBQUFBLGVBQ3BCdEIsS0FBS3VCLFNBR1BULE9BQ0VkLEtBQUt3QixTQUFXLEVBRWhCeEIsS0FBS3lCLE1BQVEsRUFDYnpCLEtBQUswQixLQUFPLEVBQ1oxQixLQUFLMkIsRUFBSSxFQUNUM0IsS0FBSzRCLFNBQVcsRUFFaEI1QixLQUFLNkIsV0FDTDdCLEtBQUs4QixZQUNMOUIsS0FBSytCLGNBQ0wvQixLQUFLZ0MsU0FDTGhDLEtBQUtpQyxNQUdQSixXQUNFLENBQ0UsU0FDQSxZQUNBLE1BQ0EsY0FDQSxtQkFDQSxvQkFDQSxPQUNBLE1BQ0EsbUJBQ0Esa0JBQ0EsaUJBQ0EsZUFDQUssU0FBU0MsSUFDVG5DLEtBQUttQyxHQUFLbkMsS0FBS21DLEdBQUdDLEtBQUtwQyxTQUkzQjhCLFlBQ0U5QixLQUFLcUMsWUFBY0MsT0FBT0MsV0FDMUJ2QyxLQUFLd0MsVUFBWXhDLEtBQUtZLE9BQU82Qix3QkFBd0JDLE1BQ3JEMUMsS0FBSzJDLFVBQVkzQyxLQUFLd0MsVUFBWXhDLEtBQUtLLE1BQU11QyxRQUN6Q0MsRUFBQUEsUUFBQUEsYUFBeUJBLEVBQUFBLFFBQUFBLGNBQzNCN0MsS0FBSzhDLFVBQVk5QyxLQUFLSSxLQUFLcUMsd0JBQXdCTSxLQUFPL0MsS0FBSzJDLFVBQy9EM0MsS0FBS2dELGFBQWVoRCxLQUFLcUMsWUFBYyxFQUFxQixJQUFqQnJDLEtBQUsyQyxVQUNoRDNDLEtBQUtpRCxXQUFhakQsS0FBS3FDLFlBQWMsRUFBcUIsSUFBakJyQyxLQUFLMkMsV0FFNUNFLEVBQUFBLFFBQUFBLFlBQ0Y3QyxLQUFLOEMsVUFBWTlDLEtBQUtJLEtBQUtxQyx3QkFBd0JNLEtBQ25EL0MsS0FBS2dELGFBQWVoRCxLQUFLcUMsWUFBYyxFQUFxQixJQUFqQnJDLEtBQUsyQyxVQUNoRDNDLEtBQUtpRCxXQUFhakQsS0FBSzhDLFVBQVksR0FDdEMvQixRQUFRQyxJQUFJaEIsS0FBS2lELFdBQVlqRCxLQUFLZ0QsZUFHL0JoRCxLQUFLa0QsVUFBWWxELEtBQUt3QyxVQUFZeEMsS0FBS0MsR0FBR2tELFlBQWNuRCxLQUFLOEMsVUFFL0Q5QyxLQUFLb0QsV0FBYXBELEtBQUtXLFFBQVE4Qix3QkFBd0JZLElBR3pEdEIsY0FFRS9CLEtBQUtLLE1BQU02QixTQUFTLENBQUMzQixFQUFNK0MsS0FFekJ0RCxLQUFLdUQsZUFBaUJoRCxFQUFLa0Msd0JBQXdCTSxLQUluRC9DLEtBQUt3RCxTQUNIeEQsS0FBS3VELGVBQWlCdkQsS0FBS2dELGNBQzNCaEQsS0FBS3VELGVBQWlCdkQsS0FBS2lELFdBRXpCakQsS0FBS3dELFVBQ1B4RCxLQUFLa0IsWUFBY1gsRUFDbkJQLEtBQUtrQixZQUFZdUMsVUFBVUMsSUFBSSxXQVUvQm5ELEVBQUtrRCxVQUFVRSxPQUFPLGFBTTVCQyxtQkFDSTVELEtBQUtLLE1BQU02QixTQUFRLENBQUMzQixFQUFNK0MsS0FDcEJ0RCxLQUFLNkQsV0FDUDdELEtBQUt1RCxlQUNIaEQsRUFBS2tDLHdCQUF3Qk0sS0FBTy9DLEtBQUsyQyxVQUd6QzNDLEtBQUt1RCxlQUNMaEQsRUFBS2tDLHdCQUF3Qk0sS0FBTy9DLEtBQUsyQyxVQU03QzNDLEtBQUt3RCxTQUNIeEQsS0FBS3VELGVBQWlCdkQsS0FBS2dELGNBQzNCaEQsS0FBS3VELGVBQWlCdkQsS0FBS2lELFdBRXpCakQsS0FBS3dELFVBQ1B4RCxLQUFLa0IsWUFBY1gsRUFDbkJQLEtBQUtrQixZQUFZdUMsVUFBVUMsSUFBSSxXQVMvQm5ELEVBQUtrRCxVQUFVRSxPQUFPLGFBSzlCRyxZQUFZQyxHQUNML0QsS0FBS2lCLFNBQ0xqQixLQUFLaUIsT0FHUmpCLEtBQUt3QixVQUFZdUMsRUFBRUMsT0FGbkJoRSxLQUFLd0IsU0FBVyxFQUlwQnhCLEtBQUtpRSxRQUdQQyxpQkFBaUJILEdBQ2hCL0QsS0FBSzZELFlBQWEsRUFDakI3RCxLQUFLd0IsVUFBWXhCLEtBQUsyQyxVQUN0QjNDLEtBQUs0RCxtQkFHRDVELEtBQUt3QixVQUFheEIsS0FBSzhDLFVBQVcsTUFDcEMvQixRQUFRQyxJQUFJLGdCQUFpQmhCLEtBQUtLLE1BQU0sR0FBR29DLHdCQUF3Qk0sTUFDbkUvQyxLQUFLbUUsU0FBV25FLEtBQUtLLE1BQU1MLEtBQUtLLE1BQU11QyxPQUFTLEdBRS9DNUMsS0FBS3dCLFVBQWF4QixLQUFLMkMsVUFFckIzQyxLQUFLSyxNQUFNNkIsU0FBUyxDQUFDM0IsRUFBTStDLEtBQzNCL0MsRUFBS2tELFVBQVVFLE9BQU8sYUFJdkIzRCxLQUFLd0IsU0FBVyxFQUVoQjRDLFlBQVcsS0FDVHBFLEtBQUt3QixTQUFXeEIsS0FBS2tELFVBQ3JCbEQsS0FBS21FLFNBQVNWLFVBQVVDLElBQUksWUFDMUIsTUFJUFcsa0JBQWtCTixHQUNsQi9ELEtBQUtzRSxTQUFVLEVBQ2Z0RSxLQUFLNkQsWUFBYSxFQUNoQjdELEtBQUt3QixVQUFZeEIsS0FBSzJDLFVBQ3RCM0MsS0FBSzRELG1CQUVENUQsS0FBS3dCLFVBQVl4QixLQUFLa0QsWUFDeEJsRCxLQUFLdUUsV0FBYXZFLEtBQUtLLE1BQU0sR0FHN0JMLEtBQUtLLE1BQU02QixTQUFRLENBQUMzQixFQUFNK0MsS0FDeEIvQyxFQUFLa0QsVUFBVUUsT0FBTyxhQUd4QjNELEtBQUt3QixTQUFXeEIsS0FBS2tELFVBRXJCa0IsWUFBVyxLQUNUcEUsS0FBS3dCLFNBQVd4QixLQUFLOEMsVUFDckI5QyxLQUFLdUUsV0FBV2QsVUFBVUMsSUFBSSxZQUM3QixNQUtQYyxpQkFBaUJULEdBQ2ZBLEVBQUVVLGlCQUNFekUsS0FBS2lCLFNBQ1RqQixLQUFLMEUsVUFBVyxFQUNoQjFFLEtBQUsyRSxPQUFTWixFQUFFYSxTQUFXYixFQUFFYyxRQUFRLEdBQUdELFFBQ3hDNUUsS0FBS0MsR0FBR3dELFVBQVVDLElBQUksWUFDdEIxRCxLQUFLYSxTQUFTNEMsVUFBVUMsSUFBSSxRQUM1QjFELEtBQUs4RSxPQUFRLEdBR2ZDLGdCQUFnQmhCLEdBRWQsR0FEQS9ELEtBQUs4RSxPQUFRLEdBQ1Q5RSxLQUFLaUIsT0FBUSxPQUNqQixJQUFLakIsS0FBSzBFLFNBQVUsT0FBTyxFQUUzQixNQUFNL0MsRUFBSW9DLEVBQUVhLFNBQVdiLEVBQUVjLFFBQVEsR0FBR0QsUUFDcEM1RSxLQUFLd0IsVUFBZ0MsS0FBbkJ4QixLQUFLMkUsT0FBU2hELEdBQ2hDM0IsS0FBSzJFLE9BQVNoRCxFQUNkM0IsS0FBS2lFLE9BSVBlLGlCQUNFaEYsS0FBSzhFLE9BQVEsRUFDVDlFLEtBQUtpQixTQUNUakIsS0FBSzBFLFVBQVcsRUFDaEIxRSxLQUFLQyxHQUFHd0QsVUFBVUUsT0FBTyxZQUN6QjNELEtBQUthLFNBQVM0QyxVQUFVRSxPQUFPLFNBSWpDTSxPQTVPWSxJQUFDZ0IsRUFBS0MsRUFBS0MsRUE2T3JCbkYsS0FBSzhFLE9BQVEsRUFDYjlFLEtBQUt3QixVQTlPTXlELEVBOE9XakYsS0FBS3dCLFNBOU9YMEQsRUE4T3FCbEYsS0FBSzhDLFVBOU9yQnFDLEVBOE9nQ25GLEtBQUtrRCxVQTlPN0JrQyxLQUFLRCxJQUFJRCxFQUFLRSxLQUFLRixJQUFJRCxFQUFLRSxLQStPdkRuRixLQUFLK0IsY0FJVEMsU0FFRU0sT0FBTytDLGlCQUFpQixTQUFVckYsS0FBSzhCLFdBQ3ZDUSxPQUFPK0MsaUJBQWlCLFFBQVNyRixLQUFLOEQsYUFFdEM5RCxLQUFLVSxTQUFTMkUsaUJBQWlCLFFBQVNyRixLQUFLcUUsbUJBQzdDckUsS0FBS1MsUUFBUTRFLGlCQUFpQixRQUFTckYsS0FBS2tFLGtCQUU1Q2xFLEtBQUtDLEdBQUdvRixpQkFBaUIsYUFBY3JGLEtBQUt3RSxrQkFDNUNsQyxPQUFPK0MsaUJBQWlCLFlBQWFyRixLQUFLK0UsaUJBQzFDekMsT0FBTytDLGlCQUFpQixXQUFZckYsS0FBS2dGLGdCQUV6QzFDLE9BQU8rQyxpQkFBaUIsWUFBYXJGLEtBQUt3RSxrQkFDMUNsQyxPQUFPK0MsaUJBQWlCLFlBQWFyRixLQUFLK0UsaUJBQzFDekMsT0FBTytDLGlCQUFpQixVQUFXckYsS0FBS2dGLGdCQUN4QzlFLFNBQVNvRixLQUFLRCxpQkFBaUIsYUFBY3JGLEtBQUtnRixnQkFJcER6RCxTQUNFLE1BQU1nRSxFQUFPdkYsS0FDYkEsS0FBS3dGLE9BQVN4RixLQUFLd0MsVUFBWXhDLEtBQUsyQyxVQUFZTCxPQUFPQyxXQUN2RHZDLEtBQUt5RixHQUFLcEUsRUFBQUEsUUFBQUEsU0FBYyxDQUN0QnFFLGNBQWUsQ0FDYkMsUUFBUyxlQUNUQyxNQUFPLGFBQ1BDLGNBQWUsOEJBRWZDLFlBQWEsV0FFWFAsRUFBSzFFLFNBQVM0QyxVQUFVQyxJQUFJLFlBSWxDMUQsS0FBS3lGLEdBQ0ZNLElBQUksaUNBQWtDLENBQ3JDQyxFQUFHLE9BQ0hDLFFBQVMsRUFDVEMsU0FBVSxLQUVYSCxJQUFJLGtCQUFtQixDQUN0QkUsUUFBUyxFQUNUQyxTQUFVLEdBQ1ZDLEtBQU0sV0FDTkMsV0FBWSxXQUNWYixFQUFLdEUsUUFBUyxFQUNkc0UsRUFBSzFFLFNBQVM0QyxVQUFVRSxPQUFPLFdBS3BDM0QsS0FBS3FHLElBQU1oRixFQUFBQSxRQUFBQSxTQUFjLENBQ3ZCcUUsY0FBZSxDQUNiQyxRQUFTLGtCQUNUQyxNQUFPLFVBRVBVLElBQU0sS0FBSXRHLEtBQUt3RixTQUNmSyxjQUFlLDhCQUNmVSxTQUFTLEVBQ1RDLEtBQUssRUFDTEMsTUFBTyxFQUNQQyxRQUFTLFdBRVBuQixFQUFLMUUsU0FBUzRDLFVBQVVDLElBQUksU0FFOUJvQyxZQUFhLFdBRVhQLEVBQUsxRSxTQUFTNEMsVUFBVUUsT0FBTyxZQUlyQzNELEtBQUt5RixHQUFHa0IsR0FBRyw0QkFBNkIsQ0FDdENYLEVBQUdoRyxLQUFLd0MsWUFNYm9FLGFBQ0U1RyxLQUFLb0QsV0FBYXBELEtBQUtXLFFBQVE4Qix3QkFBd0JZLElBRXZEckQsS0FBS2lDLE1BSVBBLE1BRU1qQyxLQUFLaUIsU0FDVGpCLEtBQUsyQixFQUFJbEMsRUFBS08sS0FBSzJCLEVBQUczQixLQUFLd0IsU0FBVSxJQUVyQ3hCLEtBQUs0QixTQUFXNUIsS0FBSzJCLEVBQUkzQixLQUFLa0QsVUFFOUJsRCxLQUFLSSxLQUFLeUcsTUFBTTdHLEtBQUttQixpQkFBb0IsZUFBY25CLEtBQUsyQixPQUM1RDNCLEtBQUtRLElBQUlxRyxNQUFNN0csS0FBS21CLGlCQUFvQixVQUFTLElBQXVCLElBQWhCbkIsS0FBSzRCLFlBRTdENUIsS0FBS3lCLE1BQVEyRCxLQUFLRixJQUFJLElBQUtsRixLQUFLMEIsS0FBTzFCLEtBQUsyQixHQUM1QzNCLEtBQUswQixLQUFPMUIsS0FBSzJCLEVBRWpCM0IsS0FBSzhHLE1BQVFySCxFQUFLTyxLQUFLOEcsTUFBTzlHLEtBQUt5QixNQUFPLElBQzFDekIsS0FBS0ssTUFBTTZCLFNBQVNDLElBQ2xCQSxFQUFFMEUsTUFBTTdHLEtBQUttQixpQkFBb0IsU0FBUSxFQUEyQixLQUF2QmlFLEtBQUsyQixJQUFJL0csS0FBS3lCLFVBQzNEVSxFQUFFaEMsY0FBYyxPQUFPMEcsTUFBTTdHLEtBQUttQixpQkFBb0IsVUFDcEQsRUFBMkIsS0FBdkJpRSxLQUFLMkIsSUFBSS9HLEtBQUt5QiwrQkMvVjFCdUYsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jb21wb25lbnRzL3NsaWRlci5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcmVmaXggZnJvbSBcInByZWZpeFwiXG5pbXBvcnQgZ3NhcCBmcm9tIFwiZ3NhcFwiO1xuaW1wb3J0IHsgU2Nyb2xsVHJpZ2dlciB9IGZyb20gJ2dzYXAvU2Nyb2xsVHJpZ2dlcic7XG5pbXBvcnQgRGV0ZWN0aW9uIGZyb20gJy4uL2NsYXNzZXMvZGV0ZWN0aW9uJ1xuXG5jb25zdCBsZXJwID0gKGYwLCBmMSwgdCkgPT4gKDEgLSB0KSAqIGYwICsgdCAqIGYxO1xuY29uc3QgY2xhbXAgPSAodmFsLCBtaW4sIG1heCkgPT4gTWF0aC5tYXgobWluLCBNYXRoLm1pbih2YWwsIG1heCkpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmFnU2Nyb2xsIHtcbiAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgdGhpcy5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob2JqLmVsKTtcbiAgICB0aGlzLndyYXAgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3Iob2JqLndyYXApO1xuICAgIHRoaXMuaXRlbXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwob2JqLml0ZW0pO1xuICAgIHRoaXMuYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvYmouYmFyKTtcbiAgICB0aGlzLmxlZnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuX19sZWZ0Jyk7XG4gICAgdGhpcy5yaWdodEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG5fX3JpZ2h0Jyk7XG4gICAgLy8gdGhpcy5zZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX3NlcnZpY2VzX19nYWxsZXJ5Jyk7XG4gICAgdGhpcy5zZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX3NlcnZpY2VzJyk7XG4gICAgdGhpcy5zbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fc2VydmljZXNfX2dhbGxlcnknKTtcbiAgICB0aGlzLkRyYWdUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnNvcl9fdGV4dDEnKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgICBjb25zb2xlLmxvZygnc2xpZGVyIGNyZWF0ZWQnKTtcblxuICAgIHRoaXMuaW5WaWV3ID0gZmFsc2U7XG4gICAgLy8ga2VlcCB0cmFjayBvZiBhY3RpdmUgc2xpZGVcbiAgICB0aGlzLmNlbnRlclNsaWRlID0gbnVsbFxuXG4gICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpO1xuICAgIGdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVHJpZ2dlcik7XG4gICAgdGhpcy5zY3JvbGwoKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5wcm9ncmVzcyA9IDA7XG4gICAgLy8gdGhpcy5taW5TY3JvbGwgPSAwO1xuICAgIHRoaXMuc3BlZWQgPSAwO1xuICAgIHRoaXMub2xkWCA9IDA7XG4gICAgdGhpcy54ID0gMDtcbiAgICB0aGlzLnBsYXlyYXRlID0gMDtcbiAgICAvL1xuICAgIHRoaXMuYmluZGluZ3MoKTtcbiAgICB0aGlzLmNhbGN1bGF0ZSgpO1xuICAgIHRoaXMuYWN0aXZlU2xpZGUoKVxuICAgIHRoaXMuZXZlbnRzKCk7XG4gICAgdGhpcy5yYWYoKTtcbiAgfVxuXG4gIGJpbmRpbmdzKCkge1xuICAgIFtcbiAgICAgICdldmVudHMnLFxuICAgICAgJ2NhbGN1bGF0ZScsXG4gICAgICAncmFmJyxcbiAgICAgICdoYW5kbGVXaGVlbCcsXG4gICAgICAnaGFuZGxlTGVmdENsaWNrcycsXG4gICAgICAnaGFuZGxlUmlnaHRDbGlja3MnLFxuICAgICAgJ21vdmUnLFxuICAgICAgJ3JhZicsXG4gICAgICAnaGFuZGxlVG91Y2hTdGFydCcsXG4gICAgICAnaGFuZGxlVG91Y2hNb3ZlJyxcbiAgICAgICdoYW5kbGVUb3VjaEVuZCcsXG4gICAgICAnYWN0aXZlU2xpZGUnLFxuICAgIF0uZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgdGhpc1tpXSA9IHRoaXNbaV0uYmluZCh0aGlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNhbGN1bGF0ZSgpIHtcbiAgICB0aGlzLndpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGhcbiAgICB0aGlzLndyYXBXaWR0aCA9IHRoaXMuc2xpZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIHRoaXMuSXRlbVdpZHRoID0gdGhpcy53cmFwV2lkdGggLyB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICBpZiAoRGV0ZWN0aW9uLmlzRGVza3RvcCgpIHx8IERldGVjdGlvbi5pc1RhYmxldCgpKSB7XG4gICAgICB0aGlzLm1pblNjcm9sbCA9IHRoaXMud3JhcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gdGhpcy5JdGVtV2lkdGg7XG4gICAgICB0aGlzLndpbmRvd0NlbnRlciA9IHRoaXMud2luZG93V2lkdGggLyAyICsgdGhpcy5JdGVtV2lkdGggKiAwLjI1O1xuICAgICAgdGhpcy53aW5kb3dMZWZ0ID0gdGhpcy53aW5kb3dXaWR0aCAvIDIgLSB0aGlzLkl0ZW1XaWR0aCAqIDAuNzU7XG4gICAgfVxuICAgIGlmIChEZXRlY3Rpb24uaXNQaG9uZSgpKXtcbiAgICAgIHRoaXMubWluU2Nyb2xsID0gdGhpcy53cmFwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcbiAgICAgIHRoaXMud2luZG93Q2VudGVyID0gdGhpcy53aW5kb3dXaWR0aCAvIDIgKyB0aGlzLkl0ZW1XaWR0aCAqIDAuMjU7XG4gICAgICB0aGlzLndpbmRvd0xlZnQgPSB0aGlzLm1pblNjcm9sbCAtIDIwO1xuXHRcdFx0Y29uc29sZS5sb2codGhpcy53aW5kb3dMZWZ0LCB0aGlzLndpbmRvd0NlbnRlcilcbiAgICB9XG4gICAgICAvLyB0aGlzLndyYXAuc3R5bGUud2lkdGggPSBgJHt0aGlzLndyYXBXaWR0aH1weGA7XG4gICAgICB0aGlzLm1heFNjcm9sbCA9IHRoaXMud3JhcFdpZHRoIC0gdGhpcy5lbC5jbGllbnRXaWR0aCAtIHRoaXMubWluU2Nyb2xsO1xuICAgIC8vIC0gdGhpcy5taW5TY3JvbGw7XG4gICAgdGhpcy5zZWN0aW9uVG9wID0gdGhpcy5zZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgfVxuXG4gIGFjdGl2ZVNsaWRlICgpIHtcbiAgICAvLyBDbGlja1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCggKGl0ZW0sIGluZGV4KSA9PiB7XG5cbiAgICAgIHRoaXMuaXRlbUJvdW5kc0xlZnQgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnRcblxuICAgICAgLy8gY29uc3QgaXRlbVRpdGxlU3BhbnMgPSBpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4nKVxuXG4gICAgICB0aGlzLmlzQ2VudGVyID1cbiAgICAgICAgdGhpcy5pdGVtQm91bmRzTGVmdCA8IHRoaXMud2luZG93Q2VudGVyICYmXG4gICAgICAgIHRoaXMuaXRlbUJvdW5kc0xlZnQgPiB0aGlzLndpbmRvd0xlZnQ7XG5cbiAgICAgIGlmICh0aGlzLmlzQ2VudGVyKSB7XG4gICAgICAgIHRoaXMuY2VudGVyU2xpZGUgPSBpdGVtXG4gICAgICAgIHRoaXMuY2VudGVyU2xpZGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFxuICAgICAgICAvLyAgIGl0ZW1UaXRsZVNwYW5zWzBdLmlubmVySFRNTCxcbiAgICAgICAgLy8gICB0aGlzLmNlbnRlclNsaWRlLFxuICAgICAgICAvLyAgIHRoaXMuaXRlbUJvdW5kc0xlZnQsXG4gICAgICAgIC8vICAgdGhpcy53aW5kb3dMZWZ0LFxuICAgICAgICAvLyAgIHRoaXMud2luZG93Q2VudGVyXG4gICAgICAgIC8vICk7XG4gICAgICAgIC8vIHJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBwcmV2aW91cyBhbmQgYWRkIHRvIGN1cnJlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgIH1cblxuICAgIH0pXG4gIH1cblxuICBhY3RpdmVTbGlkZUNsaWNrICgpIHtcbiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucmlnaHRDbGljaykge1xuICAgICAgICAgIHRoaXMuaXRlbUJvdW5kc0xlZnQgPVxuICAgICAgICAgICAgaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gdGhpcy5JdGVtV2lkdGg7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmlnaHQgY2xpY2snKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pdGVtQm91bmRzTGVmdCA9XG4gICAgICAgICAgICBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyB0aGlzLkl0ZW1XaWR0aDtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsZWZ0IGNsaWNrJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zdCBpdGVtVGl0bGVTcGFucyA9IGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnc3BhbicpO1xuXG4gICAgICAgIHRoaXMuaXNDZW50ZXIgPVxuICAgICAgICAgIHRoaXMuaXRlbUJvdW5kc0xlZnQgPCB0aGlzLndpbmRvd0NlbnRlciAmJlxuICAgICAgICAgIHRoaXMuaXRlbUJvdW5kc0xlZnQgPiB0aGlzLndpbmRvd0xlZnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDZW50ZXIpIHtcbiAgICAgICAgICB0aGlzLmNlbnRlclNsaWRlID0gaXRlbTtcbiAgICAgICAgICB0aGlzLmNlbnRlclNsaWRlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFxuICAgICAgICAgIC8vICAgaXRlbVRpdGxlU3BhbnNbMF0uaW5uZXJIVE1MLFxuICAgICAgICAgIC8vICAgdGhpcy5jZW50ZXJTbGlkZSxcbiAgICAgICAgICAvLyAgIHRoaXMuaXRlbUJvdW5kc0xlZnQsXG4gICAgICAgICAgLy8gICB0aGlzLndpbmRvd0xlZnQsXG4gICAgICAgICAgLy8gICB0aGlzLndpbmRvd0NlbnRlclxuICAgICAgICAgIC8vICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBoYW5kbGVXaGVlbChlKSB7XG4gICAgaWYgKCF0aGlzLmluVmlldykgcmV0dXJuO1xuICAgIGlmICghdGhpcy5pblZpZXcpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3MgKz0gZS5kZWx0YVk7XG4gIH1cbiAgdGhpcy5tb3ZlKCk7XG59XG5cbmhhbmRsZUxlZnRDbGlja3MoZSkge1xuXHR0aGlzLnJpZ2h0Q2xpY2sgPSBmYWxzZVxuICB0aGlzLnByb2dyZXNzIC09IHRoaXMuSXRlbVdpZHRoO1xuICB0aGlzLmFjdGl2ZVNsaWRlQ2xpY2soKTtcblxuICAvLyBpZiBhdCB0aGUgc3RhcnQgb2YgZ2FsbGVyeSBtb3ZlIHRvIGVuZCBvZiBzbGlkZVxuICBpZiAodGhpcy5wcm9ncmVzcyA8PSAodGhpcy5taW5TY3JvbGwgLTEwMCApKSB7XG4gICAgY29uc29sZS5sb2coJ2dhbGxlcnkgc3RhcnQnLCB0aGlzLml0ZW1zWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpO1xuICAgIHRoaXMuc2xpZGVFbmQgPSB0aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoIC0gMV07XG5cbiAgICB0aGlzLnByb2dyZXNzIC09ICh0aGlzLkl0ZW1XaWR0aCApO1xuICAgIC8vIHJlbW92ZSBhY3RpdmUgY2xhc3NcbiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCggKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICB9XG4gICAgIClcblxuICAgICB0aGlzLnByb2dyZXNzID0gMDtcblxuICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5tYXhTY3JvbGw7XG4gICAgICAgdGhpcy5zbGlkZUVuZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlUmlnaHRDbGlja3MoZSkge1xuXHRcdHRoaXMuY2xpY2tlZCA9IHRydWU7XG5cdFx0dGhpcy5yaWdodENsaWNrID0gdHJ1ZTtcbiAgICB0aGlzLnByb2dyZXNzICs9IHRoaXMuSXRlbVdpZHRoO1xuICAgIHRoaXMuYWN0aXZlU2xpZGVDbGljaygpO1xuICAgIC8vIGlmIGF0IHRoZSBlbmQgb2YgZ2FsbGVyeSBtb3ZlIHRvIHN0YXJ0IG9mIHNsaWRlXG4gICAgaWYgKHRoaXMucHJvZ3Jlc3MgPj0gdGhpcy5tYXhTY3JvbGwpIHtcbiAgICAgIHRoaXMuc2xpZGVTdGFydCA9IHRoaXMuaXRlbXNbMF07XG5cbiAgICAgIC8vIHJlbW92ZSBhY3RpdmUgY2xhc3NcbiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5tYXhTY3JvbGw7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5taW5TY3JvbGw7XG4gICAgICAgIHRoaXMuc2xpZGVTdGFydC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnZ2FsbGVyeSBlbmQnLCB0aGlzLml0ZW1zWzBdKTtcbiAgfVxuXG4gIGhhbmRsZVRvdWNoU3RhcnQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZighdGhpcy5pblZpZXcpIHJldHVybjtcbiAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXJ0WCA9IGUuY2xpZW50WCB8fCBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgdGhpcy5EcmFnVGV4dC5jbGFzc0xpc3QuYWRkKCdub25lJylcbiAgICB0aGlzLmNsaWNrID0gZmFsc2VcbiAgfVxuXG4gIGhhbmRsZVRvdWNoTW92ZShlKSB7XG4gICAgdGhpcy5jbGljayA9IGZhbHNlXG4gICAgaWYoIXRoaXMuaW5WaWV3KSByZXR1cm47XG4gICAgaWYgKCF0aGlzLmRyYWdnaW5nKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gY29uc3QgeCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRYIDogZS5jbGllbnRYO1xuICAgIGNvbnN0IHggPSBlLmNsaWVudFggfHwgZS50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgdGhpcy5wcm9ncmVzcyArPSAodGhpcy5zdGFydFggLSB4KSAqIDIuNTtcbiAgICB0aGlzLnN0YXJ0WCA9IHg7XG4gICAgdGhpcy5tb3ZlKCk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9ncmVzcyk7XG4gIH1cblxuICBoYW5kbGVUb3VjaEVuZCgpIHtcbiAgICB0aGlzLmNsaWNrID0gZmFsc2U7XG4gICAgaWYoIXRoaXMuaW5WaWV3KSByZXR1cm47XG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKTtcbiAgICB0aGlzLkRyYWdUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ25vbmUnKTtcbiAgfVxuXG5cbiAgbW92ZSgpIHtcbiAgICB0aGlzLmNsaWNrID0gZmFsc2U7XG4gICAgdGhpcy5wcm9ncmVzcyA9IGNsYW1wKHRoaXMucHJvZ3Jlc3MsIHRoaXMubWluU2Nyb2xsLCB0aGlzLm1heFNjcm9sbCk7XG4gICAgICB0aGlzLmFjdGl2ZVNsaWRlKCk7XG5cbiAgfVxuXG4gIGV2ZW50cygpIHtcbiAgICAvLyBpZighdGhpcy5pblZpZXcpIHJldHVybjtpZighdGhpcy5pblZpZXcpIHJldHVybjtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5jYWxjdWxhdGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuaGFuZGxlV2hlZWwpO1xuICAgIC8vXG4gICAgdGhpcy5yaWdodEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlUmlnaHRDbGlja3MpO1xuICAgIHRoaXMubGVmdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTGVmdENsaWNrcyk7XG4gICAgLy9cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmhhbmRsZVRvdWNoU3RhcnQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmhhbmRsZVRvdWNoTW92ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUb3VjaEVuZCk7XG4gICAgLy9cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVUb3VjaFN0YXJ0KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVUb3VjaE1vdmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5oYW5kbGVUb3VjaEVuZCk7XG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oYW5kbGVUb3VjaEVuZCk7XG5cbiAgfVxuXG4gIHNjcm9sbCgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICB0aGlzLnNsaWRlWSA9IHRoaXMud3JhcFdpZHRoICsgdGhpcy5JdGVtV2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLnRsID0gZ3NhcC50aW1lbGluZSh7XG4gICAgICBzY3JvbGxUcmlnZ2VyOiB7XG4gICAgICAgIHRyaWdnZXI6ICcuaG9tZV9fYWJvdXQnLFxuICAgICAgICBzdGFydDogJ2JvdHRvbSAxMCUnLFxuICAgICAgICB0b2dnbGVBY3Rpb25zOiAncmVzdGFydCBjb21wbGV0ZSBub25lIHJlc2V0JyxcbiAgICAgICAgLy8gbWFya2VyczogdHJ1ZSxcbiAgICAgICAgb25FbnRlckJhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYWRkIG5vbmUnKTtcbiAgICAgICAgICBzZWxmLkRyYWdUZXh0LmNsYXNzTGlzdC5hZGQoJ25vbmUnKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgdGhpcy50bFxuICAgICAgLnNldCgnLmhvbWVfX2Fib3V0X19zY3JvbGx0ZXh0IC53b3JkJywge1xuICAgICAgICB5OiAnMTAwJScsXG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICB9KVxuICAgICAgLnNldCgnLmhvbWVfX3NlcnZpY2VzJywge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICBlYXNlOiAnZXhwby5vdXQnLFxuICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5pblZpZXcgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuRHJhZ1RleHQuY2xhc3NMaXN0LnJlbW92ZSgnbm9uZScpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvcGFjaXR5IDEnLCBzZWxmLmluVmlldyk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICB0aGlzLnRsMSA9IGdzYXAudGltZWxpbmUoe1xuICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcbiAgICAgICAgIHRyaWdnZXI6ICcuaG9tZV9fc2VydmljZXMnLFxuICAgICAgICAgc3RhcnQ6ICd0b3AgdG9wJyxcbiAgICAgICAgIC8vICBlbmQ6IGArPSR7dGhpcy53cmFwV2lkdGh9IGJvdHRvbWAsXG4gICAgICAgICBlbmQ6IGArPSR7dGhpcy5zbGlkZVl9YCxcbiAgICAgICAgIHRvZ2dsZUFjdGlvbnM6ICdyZXN0YXJ0IGNvbXBsZXRlIG5vbmUgcmVzZXQnLFxuICAgICAgICAgbWFya2VyczogdHJ1ZSxcbiAgICAgICAgIHBpbjogdHJ1ZSxcbiAgICAgICAgIHNjcnViOiAxLFxuICAgICAgICAgb25MZWF2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhZGQgbm9uZScpO1xuICAgICAgICAgICBzZWxmLkRyYWdUZXh0LmNsYXNzTGlzdC5hZGQoJ25vbmUnKTtcbiAgICAgICAgIH0sXG4gICAgICAgICBvbkVudGVyQmFjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhZGQgbm9uZScpO1xuICAgICAgICAgICBzZWxmLkRyYWdUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ25vbmUnKTtcbiAgICAgICAgIH0sXG4gICAgICAgfSxcbiAgICAgfSk7XG4gICAgIHRoaXMudGwudG8oJy5ob21lX19zZXJ2aWNlc19fZ2FsbGVyeSAnLCB7XG4gICAgICAgeTogdGhpcy53cmFwV2lkdGgsXG5cbiAgICAgfSk7XG5cbiAgfVxuXG4gIG1vdmVTbGlkZXIgKCkge1xuICAgIHRoaXMuc2VjdGlvblRvcCA9IHRoaXMuc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9ncmVzcywgdGhpcy5tYXhTY3JvbGwsIHRoaXMuc2VjdGlvblRvcCk7XG4gICAgdGhpcy5yYWYoKVxuXG4gIH1cblxuICByYWYoKSB7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5pblZpZXcpO1xuICAgIGlmKCF0aGlzLmluVmlldykgcmV0dXJuXG4gICAgdGhpcy54ID0gbGVycCh0aGlzLngsIHRoaXMucHJvZ3Jlc3MsIDAuMSk7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy54LCB0aGlzLnByb2dyZXNzKVxuICAgIHRoaXMucGxheXJhdGUgPSB0aGlzLnggLyB0aGlzLm1heFNjcm9sbDtcbiAgICAvL1xuICAgIHRoaXMud3JhcC5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgdHJhbnNsYXRlWCgkey10aGlzLnh9cHgpYDtcbiAgICB0aGlzLmJhci5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgc2NhbGVYKCR7MC4xOCArIHRoaXMucGxheXJhdGUgKiAwLjgyfSlgO1xuICAgIC8vXG4gICAgdGhpcy5zcGVlZCA9IE1hdGgubWluKDEwMCwgdGhpcy5vbGRYIC0gdGhpcy54KTtcbiAgICB0aGlzLm9sZFggPSB0aGlzLng7XG4gICAgLy9cbiAgICB0aGlzLnNjYWxlID0gbGVycCh0aGlzLnNjYWxlLCB0aGlzLnNwZWVkLCAwLjEpO1xuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgaS5zdHlsZVt0aGlzLnRyYW5zZm9ybVByZWZpeF0gPSBgc2NhbGUoJHsxIC0gTWF0aC5hYnModGhpcy5zcGVlZCkgKiAwLjAwMn0pYDtcbiAgICAgIGkucXVlcnlTZWxlY3RvcignaW1nJykuc3R5bGVbdGhpcy50cmFuc2Zvcm1QcmVmaXhdID0gYHNjYWxlWCgke1xuICAgICAgICAxICsgTWF0aC5hYnModGhpcy5zcGVlZCkgKiAwLjAwNFxuICAgICAgfSlgO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogSW5zdGFuY2VzXG4gKi9cblxuXG5cblxuXG4vKipcbiAqIE9uZSByYWYgdG8gcnVsZSBlbSBhbGxcbiAqL1xuXG5cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiOTA2YWYyNThjMTcwOTVmZTgzZDZcIikiXSwibmFtZXMiOlsibGVycCIsImYwIiwiZjEiLCJ0IiwiRHJhZ1Njcm9sbCIsImNvbnN0cnVjdG9yIiwib2JqIiwidGhpcyIsImVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid3JhcCIsIml0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJiYXIiLCJsZWZ0QnRuIiwicmlnaHRCdG4iLCJzZWN0aW9uIiwic2xpZGVyIiwiRHJhZ1RleHQiLCJpbml0IiwiY29uc29sZSIsImxvZyIsImluVmlldyIsImNlbnRlclNsaWRlIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiZ3NhcCIsIlNjcm9sbFRyaWdnZXIiLCJzY3JvbGwiLCJwcm9ncmVzcyIsInNwZWVkIiwib2xkWCIsIngiLCJwbGF5cmF0ZSIsImJpbmRpbmdzIiwiY2FsY3VsYXRlIiwiYWN0aXZlU2xpZGUiLCJldmVudHMiLCJyYWYiLCJmb3JFYWNoIiwiaSIsImJpbmQiLCJ3aW5kb3dXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ3cmFwV2lkdGgiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsIkl0ZW1XaWR0aCIsImxlbmd0aCIsIkRldGVjdGlvbiIsIm1pblNjcm9sbCIsImxlZnQiLCJ3aW5kb3dDZW50ZXIiLCJ3aW5kb3dMZWZ0IiwibWF4U2Nyb2xsIiwiY2xpZW50V2lkdGgiLCJzZWN0aW9uVG9wIiwidG9wIiwiaW5kZXgiLCJpdGVtQm91bmRzTGVmdCIsImlzQ2VudGVyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYWN0aXZlU2xpZGVDbGljayIsInJpZ2h0Q2xpY2siLCJoYW5kbGVXaGVlbCIsImUiLCJkZWx0YVkiLCJtb3ZlIiwiaGFuZGxlTGVmdENsaWNrcyIsInNsaWRlRW5kIiwic2V0VGltZW91dCIsImhhbmRsZVJpZ2h0Q2xpY2tzIiwiY2xpY2tlZCIsInNsaWRlU3RhcnQiLCJoYW5kbGVUb3VjaFN0YXJ0IiwicHJldmVudERlZmF1bHQiLCJkcmFnZ2luZyIsInN0YXJ0WCIsImNsaWVudFgiLCJ0b3VjaGVzIiwiY2xpY2siLCJoYW5kbGVUb3VjaE1vdmUiLCJoYW5kbGVUb3VjaEVuZCIsInZhbCIsIm1pbiIsIm1heCIsIk1hdGgiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsInNlbGYiLCJzbGlkZVkiLCJ0bCIsInNjcm9sbFRyaWdnZXIiLCJ0cmlnZ2VyIiwic3RhcnQiLCJ0b2dnbGVBY3Rpb25zIiwib25FbnRlckJhY2siLCJzZXQiLCJ5Iiwib3BhY2l0eSIsImR1cmF0aW9uIiwiZWFzZSIsIm9uQ29tcGxldGUiLCJ0bDEiLCJlbmQiLCJtYXJrZXJzIiwicGluIiwic2NydWIiLCJvbkxlYXZlIiwidG8iLCJtb3ZlU2xpZGVyIiwic3R5bGUiLCJzY2FsZSIsImFicyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==